(function(c){var b="quickEdit",d={duration:1500,rows:10,title:"Hold down to edit quickly.",okButtonText:"Save",cancelButtonText:"Cancel",okButtonClass:"ok_button",cancelButtonClass:"cancel_button",callback:"",mode:"multi"};function a(f,e){this.$element=c(f);this.options=c.extend({},d,e);this.init()}a.prototype={init:function(){var e=this;e.getAttrOptions();e.writeTitle();e.openPanel()},getAttrOptions:function(){var e=this;e.options.mode=(e.$element.attr("data-quickedit-mode")==undefined)?e.options.mode:e.$element.attr("data-quickedit-mode")},writeTitle:function(){var e=this;e.$element.attr("title",e.options.title)},deleteTitle:function(){var e=this;e.$element.removeAttr("title")},openPanel:function(){var e=this;var f;e.$element.on("mousedown",function(){f=setTimeout(function(){if(e.$element.attr("data-quickedit-opened")==undefined){e.whenPanelOpens();e.$element.attr("data-quickedit-opened",true);var g=[];if(e.options.mode=="multi"){g.push('<textarea data-quickedit-text rows="'+e.options.rows+'">'+e.cleanText(e.$element.html())+"</textarea>");g.push("<div data-quickedit-buttons>");g.push('<span data-quickedit-button="ok" class="'+e.options.okButtonClass+'"><i class="fa fa-check"></i> '+e.options.okButtonText+"</span>");g.push('<span data-quickedit-button="cancel" class="'+e.options.cancelButtonClass+'"><i class="fa fa-times"></i> '+e.options.cancelButtonText+"</span>");g.push("</div>")}else{if(e.options.mode=="single"){g.push('<input type="text" data-quickedit-text value="'+e.cleanText(e.$element.html())+'"></input>');g.push("<div data-quickedit-buttons>");g.push('<span data-quickedit-button="ok" class="'+e.options.okButtonClass+'"><i class="fa fa-check"></i> '+e.options.okButtonText+"</span>");g.push('<span data-quickedit-button="cancel" class="'+e.options.cancelButtonClass+'"><i class="fa fa-times"></i> '+e.options.cancelButtonText+"</span>");g.push("</div>")}}e.$element.html(g.join(""));e.runPanelActions();e.deleteTitle()}},e.options.duration)}).on("mouseup",function(){clearTimeout(f)})},whenPanelOpens:function(){var e=this;if(e.$element.attr("data-readmore")!=undefined&&typeof e.$element.removeReadMore=="function"){e.$element.removeReadMore()}},runPanelActions:function(){var e=this;e.$element.find('[data-quickedit-button="ok"]').on("click",function(){e.writeTitle();e.$element.removeAttr("data-quickedit-opened");var f;if(e.options.mode=="multi"){f=e.$element.find("[data-quickedit-text]").val();f=e.parseText(f)}else{if(e.options.mode=="single"){f=e.$element.find("[data-quickedit-text]").val()}}e.$element.html(f);var g=e.options.callback;if(c.isFunction(g)){g.call(e)}});e.$element.find('[data-quickedit-button="cancel"]').on("click",function(){e.writeTitle();e.$element.removeAttr("data-quickedit-opened");var f;if(e.options.mode=="multi"){f=e.$element.find("[data-quickedit-text]").html();f=e.parseText(f)}else{if(e.options.mode=="single"){f=e.$element.find("[data-quickedit-text]").val()}}e.$element.html(f)})},parseText:function(e){e=String(e);e=e.replace(/\n/g,"<br>");return e},cleanText:function(e){e=String(e);e=e.trim();e=e.replace(/<br>/g,"\n");return e}};c.fn[b]=function(e){return this.each(function(){if(!c.data(this,b)){c.data(this,b,new a(this,e))}})}})(jQuery);